{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/walaa/Desktop/Isomorphic Main/isomorphic/packages/isomorphic-next/containers/Invoice/EditInvoice.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport moment from 'moment';\nimport { EditTable } from '@iso/components/Invoice/InvoiceTable';\nimport OrderStatus from '@iso/components/Invoice/OrderStatus';\nimport notification from '@iso/components/Notification';\nimport Button from '@iso/components/uielements/button';\nimport Input, { Textarea } from '@iso/components/uielements/input';\nimport DatePicker from '@iso/components/uielements/datePicker';\nimport Box from '@iso/components/utility/box';\nimport LayoutWrapper from '@iso/components/utility/layoutWrapper';\nimport InvoicePageWrapper from './SingleInvoice.styles';\nimport { stringToPosetiveInt } from '@iso/lib/helpers/utility';\nimport { orderStatusOptions } from './config';\n\nvar updateValues = function updateValues(invoice) {\n  var invoiceList = invoice.invoiceList;\n  var subTotal = 0;\n  invoiceList.forEach(function (item, index) {\n    var price = item.costs * item.qty;\n    invoice.invoiceList[index].price = price;\n    invoice.invoiceList[index].key = index + 1;\n    subTotal += price;\n  });\n  invoice.subTotal = subTotal;\n  invoice.vatPrice = Math.floor(invoice.vatRate * subTotal * 0.01);\n  invoice.totalCost = invoice.vatPrice + subTotal;\n  return invoice;\n};\n\nvar checkInvoice = function checkInvoice(invoice) {\n  var emptyKeys = ['number', 'billTo', 'billToAddress', 'billFrom', 'billFromAddress', 'currency'];\n  var emptyKeysErrors = ['Invoice Number', 'Bill To', 'Bill To Address', 'Bill From', 'Bill From Address', 'Currency'];\n\n  for (var i = 0; i < emptyKeys.length; i++) {\n    if (!invoice[emptyKeys[i]]) {\n      return \"Please fill in \".concat(emptyKeysErrors[i]);\n    }\n  }\n\n  for (var _i = 0; _i < invoice.invoiceList.length; _i++) {\n    if (!invoice.invoiceList[_i].itemName) {\n      return \"Please fill in item name of \".concat(_i + 1, \" item\");\n    }\n\n    if (invoice.invoiceList[_i].costs === 0) {\n      return \"cost of \".concat(_i + 1, \" item should be positive\");\n    }\n\n    if (invoice.invoiceList[_i].qty === 0) {\n      return \"quantity of \".concat(_i + 1, \" item should be positive\");\n    }\n  }\n\n  return '';\n};\n\nvar _default = /*#__PURE__*/function (_Component) {\n  _inherits(_default, _Component);\n\n  var _super = _createSuper(_default);\n\n  function _default() {\n    var _this;\n\n    _classCallCheck(this, _default);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"onSave\", function () {\n      var _this$props = _this.props,\n          editableInvoice = _this$props.editableInvoice,\n          isNewInvoice = _this$props.isNewInvoice,\n          updateInvoice = _this$props.updateInvoice;\n      var error = checkInvoice(editableInvoice);\n\n      if (error) {\n        notification('error', error);\n      } else {\n        var successMessage = isNewInvoice ? 'A new Invoice added' : 'Invoice Updated';\n        notification('success', successMessage);\n        updateInvoice(editableInvoice);\n      }\n    });\n\n    return _this;\n  }\n\n  _createClass(_default, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          editableInvoice = _this$props2.editableInvoice,\n          isNewInvoice = _this$props2.isNewInvoice,\n          redirectPath = _this$props2.redirectPath,\n          toggleView = _this$props2.toggleView,\n          editInvoice = _this$props2.editInvoice;\n      return __jsx(LayoutWrapper, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 7\n        }\n      }, __jsx(Box, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }\n      }, __jsx(InvoicePageWrapper, {\n        className: \"editView\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }\n      }, __jsx(\"div\", {\n        className: \"PageHeader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, isNewInvoice ? __jsx(Link, {\n        href: redirectPath,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }\n      }, __jsx(Button, {\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 19\n        }\n      }, __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }\n      }, \"Cancel\"))) : __jsx(Button, {\n        onClick: function onClick() {\n          return toggleView(false);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }\n      }, __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 19\n        }\n      }, \"Cancel\")), __jsx(Button, {\n        type: \"primary\",\n        onClick: this.onSave,\n        className: \"saveBtn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 15\n        }\n      }, __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }\n      }, \"Save\"))), __jsx(\"div\", {\n        className: \"PageContent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"OrderInfo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 15\n        }\n      }, __jsx(\"div\", {\n        className: \"LeftSideContent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }\n      }, __jsx(\"h3\", {\n        className: \"Title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 19\n        }\n      }, \"Invoice Info\"), __jsx(Input, {\n        placeholder: \"Number\",\n        value: editableInvoice.number,\n        onChange: function onChange(event) {\n          editableInvoice.number = event.target.value;\n          editInvoice(editableInvoice);\n        },\n        className: \"LeftSideContentInput\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 19\n        }\n      })), __jsx(\"div\", {\n        className: \"RightSideContent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 17\n        }\n      }, __jsx(\"div\", {\n        className: \"RightSideStatus\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 19\n        }\n      }, __jsx(\"span\", {\n        className: \"RightSideStatusSpan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }\n      }, \"Order Status: \"), __jsx(OrderStatus, {\n        value: editableInvoice.orderStatus,\n        onChange: function onChange(orderStatus) {\n          editableInvoice.orderStatus = orderStatus;\n          editInvoice(editableInvoice);\n        },\n        orderStatusOptions: orderStatusOptions,\n        className: \"RightStatusDropdown\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      })), __jsx(\"div\", {\n        className: \"RightSideDate\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 19\n        }\n      }, \"Order date:\", ' ', __jsx(DatePicker, {\n        allowClear: false,\n        value: moment(new Date(editableInvoice.orderDate)),\n        onChange: function onChange(val) {\n          editableInvoice.orderDate = val.toDate().getTime();\n          editInvoice(editableInvoice);\n        },\n        format: \"MMMM Do YYYY\",\n        animateYearScrolling: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 21\n        }\n      })))), __jsx(\"div\", {\n        className: \"BillingInformation\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }\n      }, __jsx(\"div\", {\n        className: \"LeftSideContent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 17\n        }\n      }, __jsx(Input, {\n        placeholder: \"Bill From\",\n        value: editableInvoice.billFrom,\n        onChange: function onChange(event) {\n          editableInvoice.billFrom = event.target.value;\n          editInvoice(editableInvoice);\n        },\n        className: \"BillFormTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 19\n        }\n      }), __jsx(Textarea, {\n        placeholder: \"Bill From Address\",\n        value: editableInvoice.billFromAddress,\n        rows: 5,\n        onChange: function onChange(event) {\n          editableInvoice.billFromAddress = event.target.value;\n          editInvoice(editableInvoice);\n        },\n        className: \"BillFormAddress\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 19\n        }\n      })), __jsx(\"div\", {\n        className: \"RightSideContent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 17\n        }\n      }, __jsx(Input, {\n        placeholder: \"Bill To\",\n        value: editableInvoice.billTo,\n        onChange: function onChange(event) {\n          editableInvoice.billTo = event.target.value;\n          editInvoice(editableInvoice);\n        },\n        className: \"BillFormTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 19\n        }\n      }), __jsx(Textarea, {\n        placeholder: \"Bill To Address\",\n        value: editableInvoice.billToAddress,\n        rows: 5,\n        onChange: function onChange(event) {\n          editableInvoice.billToAddress = event.target.value;\n          editInvoice(editableInvoice);\n        },\n        className: \"BillFormAddress\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 19\n        }\n      }))), __jsx(\"div\", {\n        className: \"InvoiceTable editInvoiceTable\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 15\n        }\n      }, __jsx(EditTable, {\n        editableInvoice: editableInvoice,\n        editInvoice: editInvoice,\n        updateValues: updateValues,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 17\n        }\n      }), __jsx(\"div\", {\n        className: \"InvoiceTableBtn\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      }, __jsx(Button, {\n        onClick: function onClick() {\n          editableInvoice.invoiceList.push({\n            key: editableInvoice.invoiceList.length + 1,\n            itemName: '',\n            costs: 0,\n            qty: 0,\n            price: 0\n          });\n          editInvoice(editableInvoice);\n        },\n        type: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 19\n        }\n      }, \"Add Item\")), __jsx(\"div\", {\n        className: \"TotalBill\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 17\n        }\n      }, __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 19\n        }\n      }, __jsx(\"span\", {\n        className: \"TotalBillTitle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }\n      }, \"Sub-total : \"), __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 21\n        }\n      }, \"\".concat(editableInvoice.currency).concat(editableInvoice.subTotal))), __jsx(\"div\", {\n        className: \"vatRateCalc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 19\n        }\n      }, __jsx(\"span\", {\n        className: \"vatRateCalcSpan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 21\n        }\n      }, \" Total Vat : \"), __jsx(\"div\", {\n        className: \"vatRateCalcWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 21\n        }\n      }, __jsx(Input, {\n        value: editableInvoice.vatRate,\n        addonAfter: \"%\",\n        onChange: function onChange(event) {\n          editableInvoice.vatRate = stringToPosetiveInt(event.target.value, editableInvoice.vatRate);\n          editInvoice(updateValues(editableInvoice));\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 23\n        }\n      }), __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 23\n        }\n      }, \"\".concat(editableInvoice.currency).concat(editableInvoice.vatPrice)))), __jsx(\"div\", {\n        className: \"currencySignWithTotal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 19\n        }\n      }, __jsx(\"span\", {\n        className: \"grandTotalSpan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }\n      }, \"Grand Total \"), __jsx(\"div\", {\n        className: \"currencySignWrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }\n      }, __jsx(Input, {\n        value: editableInvoice.currency,\n        onChange: function onChange(event) {\n          editableInvoice.currency = event.target.value;\n          editInvoice(editableInvoice);\n        },\n        className: \"currencySign\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 23\n        }\n      }), __jsx(\"span\", {\n        className: \"currencySignSpan\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 23\n        }\n      }, editableInvoice.totalCost))))), __jsx(\"div\", {\n        className: \"ButtonWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 15\n        }\n      })))));\n    }\n  }]);\n\n  return _default;\n}(Component);\n\nexport { _default as default };","map":{"version":3,"sources":["/Users/walaa/Desktop/Isomorphic Main/isomorphic/packages/isomorphic-next/containers/Invoice/EditInvoice.js"],"names":["React","Component","Link","moment","EditTable","OrderStatus","notification","Button","Input","Textarea","DatePicker","Box","LayoutWrapper","InvoicePageWrapper","stringToPosetiveInt","orderStatusOptions","updateValues","invoice","invoiceList","subTotal","forEach","item","index","price","costs","qty","key","vatPrice","Math","floor","vatRate","totalCost","checkInvoice","emptyKeys","emptyKeysErrors","i","length","itemName","props","editableInvoice","isNewInvoice","updateInvoice","error","successMessage","redirectPath","toggleView","editInvoice","onSave","number","event","target","value","orderStatus","Date","orderDate","val","toDate","getTime","billFrom","billFromAddress","billTo","billToAddress","push","currency"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Link from 'next/link';\nimport moment from 'moment';\nimport { EditTable } from '@iso/components/Invoice/InvoiceTable';\nimport OrderStatus from '@iso/components/Invoice/OrderStatus';\nimport notification from '@iso/components/Notification';\nimport Button from '@iso/components/uielements/button';\nimport Input, { Textarea } from '@iso/components/uielements/input';\nimport DatePicker from '@iso/components/uielements/datePicker';\nimport Box from '@iso/components/utility/box';\nimport LayoutWrapper from '@iso/components/utility/layoutWrapper';\nimport InvoicePageWrapper from './SingleInvoice.styles';\nimport { stringToPosetiveInt } from '@iso/lib/helpers/utility';\nimport { orderStatusOptions } from './config';\n\nconst updateValues = invoice => {\n  const { invoiceList } = invoice;\n  let subTotal = 0;\n  invoiceList.forEach((item, index) => {\n    const price = item.costs * item.qty;\n    invoice.invoiceList[index].price = price;\n    invoice.invoiceList[index].key = index + 1;\n    subTotal += price;\n  });\n  invoice.subTotal = subTotal;\n  invoice.vatPrice = Math.floor(invoice.vatRate * subTotal * 0.01);\n  invoice.totalCost = invoice.vatPrice + subTotal;\n  return invoice;\n};\nconst checkInvoice = invoice => {\n  const emptyKeys = [\n    'number',\n    'billTo',\n    'billToAddress',\n    'billFrom',\n    'billFromAddress',\n    'currency',\n  ];\n  const emptyKeysErrors = [\n    'Invoice Number',\n    'Bill To',\n    'Bill To Address',\n    'Bill From',\n    'Bill From Address',\n    'Currency',\n  ];\n  for (let i = 0; i < emptyKeys.length; i++) {\n    if (!invoice[emptyKeys[i]]) {\n      return `Please fill in ${emptyKeysErrors[i]}`;\n    }\n  }\n  for (let i = 0; i < invoice.invoiceList.length; i++) {\n    if (!invoice.invoiceList[i].itemName) {\n      return `Please fill in item name of ${i + 1} item`;\n    }\n    if (invoice.invoiceList[i].costs === 0) {\n      return `cost of ${i + 1} item should be positive`;\n    }\n    if (invoice.invoiceList[i].qty === 0) {\n      return `quantity of ${i + 1} item should be positive`;\n    }\n  }\n  return '';\n};\n\nexport default class extends Component {\n  onSave = () => {\n    const { editableInvoice, isNewInvoice, updateInvoice } = this.props;\n    const error = checkInvoice(editableInvoice);\n    if (error) {\n      notification('error', error);\n    } else {\n      const successMessage = isNewInvoice\n        ? 'A new Invoice added'\n        : 'Invoice Updated';\n      notification('success', successMessage);\n      updateInvoice(editableInvoice);\n    }\n  };\n  render() {\n    const {\n      editableInvoice,\n      isNewInvoice,\n      redirectPath,\n      toggleView,\n      editInvoice,\n    } = this.props;\n    return (\n      <LayoutWrapper>\n        <Box>\n          <InvoicePageWrapper className=\"editView\">\n            <div className=\"PageHeader\">\n              {isNewInvoice ? (\n                <Link href={redirectPath}>\n                  <Button color=\"primary\">\n                    <span>Cancel</span>\n                  </Button>\n                </Link>\n              ) : (\n                <Button onClick={() => toggleView(false)}>\n                  <span>Cancel</span>\n                </Button>\n              )}\n\n              <Button type=\"primary\" onClick={this.onSave} className=\"saveBtn\">\n                <span>Save</span>\n              </Button>\n            </div>\n            <div className=\"PageContent\">\n              <div className=\"OrderInfo\">\n                <div className=\"LeftSideContent\">\n                  <h3 className=\"Title\">Invoice Info</h3>\n                  <Input\n                    placeholder=\"Number\"\n                    value={editableInvoice.number}\n                    onChange={event => {\n                      editableInvoice.number = event.target.value;\n                      editInvoice(editableInvoice);\n                    }}\n                    className=\"LeftSideContentInput\"\n                  />\n                </div>\n                <div className=\"RightSideContent\">\n                  <div className=\"RightSideStatus\">\n                    <span className=\"RightSideStatusSpan\">Order Status: </span>\n                    <OrderStatus\n                      value={editableInvoice.orderStatus}\n                      onChange={orderStatus => {\n                        editableInvoice.orderStatus = orderStatus;\n                        editInvoice(editableInvoice);\n                      }}\n                      orderStatusOptions={orderStatusOptions}\n                      className=\"RightStatusDropdown\"\n                    />\n                  </div>\n                  <div className=\"RightSideDate\">\n                    Order date:{' '}\n                    <DatePicker\n                      allowClear={false}\n                      value={moment(new Date(editableInvoice.orderDate))}\n                      onChange={val => {\n                        editableInvoice.orderDate = val.toDate().getTime();\n                        editInvoice(editableInvoice);\n                      }}\n                      format=\"MMMM Do YYYY\"\n                      animateYearScrolling={true}\n                    />\n                  </div>\n                </div>\n              </div>\n              <div className=\"BillingInformation\">\n                <div className=\"LeftSideContent\">\n                  <Input\n                    placeholder=\"Bill From\"\n                    value={editableInvoice.billFrom}\n                    onChange={event => {\n                      editableInvoice.billFrom = event.target.value;\n                      editInvoice(editableInvoice);\n                    }}\n                    className=\"BillFormTitle\"\n                  />\n                  <Textarea\n                    placeholder=\"Bill From Address\"\n                    value={editableInvoice.billFromAddress}\n                    rows={5}\n                    onChange={event => {\n                      editableInvoice.billFromAddress = event.target.value;\n                      editInvoice(editableInvoice);\n                    }}\n                    className=\"BillFormAddress\"\n                  />\n                </div>\n                <div className=\"RightSideContent\">\n                  <Input\n                    placeholder=\"Bill To\"\n                    value={editableInvoice.billTo}\n                    onChange={event => {\n                      editableInvoice.billTo = event.target.value;\n                      editInvoice(editableInvoice);\n                    }}\n                    className=\"BillFormTitle\"\n                  />\n                  <Textarea\n                    placeholder=\"Bill To Address\"\n                    value={editableInvoice.billToAddress}\n                    rows={5}\n                    onChange={event => {\n                      editableInvoice.billToAddress = event.target.value;\n                      editInvoice(editableInvoice);\n                    }}\n                    className=\"BillFormAddress\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"InvoiceTable editInvoiceTable\">\n                <EditTable\n                  editableInvoice={editableInvoice}\n                  editInvoice={editInvoice}\n                  updateValues={updateValues}\n                />\n                <div className=\"InvoiceTableBtn\">\n                  <Button\n                    onClick={() => {\n                      editableInvoice.invoiceList.push({\n                        key: editableInvoice.invoiceList.length + 1,\n                        itemName: '',\n                        costs: 0,\n                        qty: 0,\n                        price: 0,\n                      });\n                      editInvoice(editableInvoice);\n                    }}\n                    type=\"primary\"\n                  >\n                    Add Item\n                  </Button>\n                </div>\n                <div className=\"TotalBill\">\n                  <p>\n                    <span className=\"TotalBillTitle\">Sub-total : </span>\n                    <span>{`${editableInvoice.currency}${editableInvoice.subTotal}`}</span>\n                  </p>\n                  <div className=\"vatRateCalc\">\n                    <span className=\"vatRateCalcSpan\"> Total Vat : </span>\n                    <div className=\"vatRateCalcWrap\">\n                      <Input\n                        value={editableInvoice.vatRate}\n                        addonAfter=\"%\"\n                        onChange={event => {\n                          editableInvoice.vatRate = stringToPosetiveInt(\n                            event.target.value,\n                            editableInvoice.vatRate\n                          );\n                          editInvoice(updateValues(editableInvoice));\n                        }}\n                      />\n\n                      <span>\n                        {`${editableInvoice.currency}${editableInvoice.vatPrice}`}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"currencySignWithTotal\">\n                    <span className=\"grandTotalSpan\">Grand Total </span>\n                    <div className=\"currencySignWrap\">\n                      <Input\n                        value={editableInvoice.currency}\n                        onChange={event => {\n                          editableInvoice.currency = event.target.value;\n                          editInvoice(editableInvoice);\n                        }}\n                        className=\"currencySign\"\n                      />\n                      <span className=\"currencySignSpan\">\n                        {editableInvoice.totalCost}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"ButtonWrapper\" />\n            </div>\n          </InvoicePageWrapper>\n        </Box>\n      </LayoutWrapper>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}