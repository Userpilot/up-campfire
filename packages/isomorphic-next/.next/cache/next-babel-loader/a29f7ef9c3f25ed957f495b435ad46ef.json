{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"/Users/walaa/Desktop/Isomorphic Main/isomorphic/packages/isomorphic-next/containers/Topbar/TopbarAddToCart.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport { connect } from 'react-redux';\nimport Popover from '@iso/components/uielements/popover';\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\nvar changeViewTopbarCart = ecommerceAction.changeViewTopbarCart,\n    changeProductQuantity = ecommerceAction.changeProductQuantity;\nvar totalPrice;\n\nvar TopbarAddtoCart = /*#__PURE__*/function (_Component) {\n  _inherits(TopbarAddtoCart, _Component);\n\n  var _super = _createSuper(TopbarAddtoCart);\n\n  function TopbarAddtoCart(props) {\n    var _this;\n\n    _classCallCheck(this, TopbarAddtoCart);\n\n    _this = _super.call(this, props);\n    _this.handleVisibleChange = _this.handleVisibleChange.bind(_assertThisInitialized(_this));\n    _this.hide = _this.hide.bind(_assertThisInitialized(_this));\n    _this.renderProducts = _this.renderProducts.bind(_assertThisInitialized(_this));\n    _this.changeQuantity = _this.changeQuantity.bind(_assertThisInitialized(_this));\n    _this.cancelQuantity = _this.cancelQuantity.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(TopbarAddtoCart, [{\n    key: \"hide\",\n    value: function hide() {\n      this.props.changeViewTopbarCart(false);\n    }\n  }, {\n    key: \"handleVisibleChange\",\n    value: function handleVisibleChange() {\n      this.props.changeViewTopbarCart(!this.props.viewTopbarCart);\n    }\n  }, {\n    key: \"renderProducts\",\n    value: function renderProducts() {\n      var _this2 = this;\n\n      var _this$props = this.props,\n          productQuantity = _this$props.productQuantity,\n          products = _this$props.products;\n      totalPrice = 0;\n\n      if (!productQuantity || productQuantity.length === 0) {\n        return __jsx(\"div\", {\n          className: \"isoNoItemMsg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 9\n          }\n        }, __jsx(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 11\n          }\n        }, \"No item found\"));\n      }\n\n      return productQuantity.map(function (product) {\n        totalPrice += product.quantity * products[product.objectID].price;\n        return __jsx(SingleCart, _extends({\n          key: product.objectID,\n          quantity: product.quantity,\n          changeQuantity: _this2.changeQuantity,\n          cancelQuantity: _this2.cancelQuantity\n        }, products[product.objectID], {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 9\n          }\n        }));\n      });\n    }\n  }, {\n    key: \"changeQuantity\",\n    value: function changeQuantity(objectID, quantity) {\n      var productQuantity = this.props.productQuantity;\n      var newProductQuantity = [];\n      productQuantity.forEach(function (product) {\n        if (product.objectID !== objectID) {\n          newProductQuantity.push(product);\n        } else {\n          newProductQuantity.push({\n            objectID: objectID,\n            quantity: quantity\n          });\n        }\n      });\n      this.props.changeProductQuantity(newProductQuantity);\n    }\n  }, {\n    key: \"cancelQuantity\",\n    value: function cancelQuantity(objectID) {\n      var productQuantity = this.props.productQuantity;\n      var newProductQuantity = [];\n      productQuantity.forEach(function (product) {\n        if (product.objectID !== objectID) {\n          newProductQuantity.push(product);\n        }\n      });\n      this.props.changeProductQuantity(newProductQuantity);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          url = _this$props2.url,\n          productQuantity = _this$props2.productQuantity,\n          viewTopbarCart = _this$props2.viewTopbarCart,\n          customizedTheme = _this$props2.customizedTheme;\n\n      var content = __jsx(TopbarDropdownWrapper, {\n        className: \"topbarAddtoCart\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        className: \"isoDropdownHeader\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 9\n        }\n      }, __jsx(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }\n      }, \"Cart\")), __jsx(\"div\", {\n        className: \"isoDropdownBody isoCartItemsWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }\n      }, this.renderProducts()), __jsx(\"div\", {\n        className: \"isoDropdownFooterLinks\",\n        onClick: this.hide,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 9\n        }\n      }, __jsx(Link, {\n        href: \"/dashboard/cart\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }\n      }, __jsx(\"a\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }\n      }, \"View Cart\")), __jsx(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }\n      }, \"Total Price: \", __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 26\n        }\n      }, \"$\", totalPrice.toFixed(2)))));\n\n      return __jsx(Popover, {\n        content: content,\n        trigger: \"click\",\n        visible: viewTopbarCart,\n        onVisibleChange: this.handleVisibleChange,\n        placement: \"bottomLeft\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 7\n        }\n      }, __jsx(\"div\", {\n        className: \"isoIconWrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 9\n        }\n      }, __jsx(\"i\", {\n        className: \"ion-android-cart\",\n        style: {\n          color: customizedTheme.textColor\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }\n      }), productQuantity.length === 0 ? '' : __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, productQuantity.length)));\n    }\n  }]);\n\n  return TopbarAddtoCart;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return _objectSpread(_objectSpread({}, state.Ecommerce), {}, {\n    customizedTheme: state.ThemeSwitcher.topbarTheme\n  });\n}\n\nexport default connect(mapStateToProps, {\n  changeViewTopbarCart: changeViewTopbarCart,\n  changeProductQuantity: changeProductQuantity\n})(TopbarAddtoCart);","map":{"version":3,"sources":["/Users/walaa/Desktop/Isomorphic Main/isomorphic/packages/isomorphic-next/containers/Topbar/TopbarAddToCart.js"],"names":["React","Component","Link","connect","Popover","SingleCart","ecommerceAction","TopbarDropdownWrapper","changeViewTopbarCart","changeProductQuantity","totalPrice","TopbarAddtoCart","props","handleVisibleChange","bind","hide","renderProducts","changeQuantity","cancelQuantity","viewTopbarCart","productQuantity","products","length","map","product","quantity","objectID","price","newProductQuantity","forEach","push","url","customizedTheme","content","toFixed","color","textColor","mapStateToProps","state","Ecommerce","ThemeSwitcher","topbarTheme"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Link from 'next/link';\nimport { connect } from 'react-redux';\nimport Popover from '@iso/components/uielements/popover';\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\n\nconst { changeViewTopbarCart, changeProductQuantity } = ecommerceAction;\nlet totalPrice;\nclass TopbarAddtoCart extends Component {\n  constructor(props) {\n    super(props);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n    this.hide = this.hide.bind(this);\n    this.renderProducts = this.renderProducts.bind(this);\n    this.changeQuantity = this.changeQuantity.bind(this);\n    this.cancelQuantity = this.cancelQuantity.bind(this);\n  }\n  hide() {\n    this.props.changeViewTopbarCart(false);\n  }\n  handleVisibleChange() {\n    this.props.changeViewTopbarCart(!this.props.viewTopbarCart);\n  }\n  renderProducts() {\n    const { productQuantity, products } = this.props;\n    totalPrice = 0;\n    if (!productQuantity || productQuantity.length === 0) {\n      return (\n        <div className=\"isoNoItemMsg\">\n          <span>No item found</span>\n        </div>\n      );\n    }\n    return productQuantity.map(product => {\n      totalPrice += product.quantity * products[product.objectID].price;\n      return (\n        <SingleCart\n          key={product.objectID}\n          quantity={product.quantity}\n          changeQuantity={this.changeQuantity}\n          cancelQuantity={this.cancelQuantity}\n          {...products[product.objectID]}\n        />\n      );\n    });\n  }\n  changeQuantity(objectID, quantity) {\n    const { productQuantity } = this.props;\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      } else {\n        newProductQuantity.push({\n          objectID,\n          quantity,\n        });\n      }\n    });\n    this.props.changeProductQuantity(newProductQuantity);\n  }\n  cancelQuantity(objectID) {\n    const { productQuantity } = this.props;\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      }\n    });\n    this.props.changeProductQuantity(newProductQuantity);\n  }\n\n  render() {\n    const {\n      url,\n      productQuantity,\n      viewTopbarCart,\n      customizedTheme,\n    } = this.props;\n    const content = (\n      <TopbarDropdownWrapper className=\"topbarAddtoCart\">\n        <div className=\"isoDropdownHeader\">\n          <h3>Cart</h3>\n        </div>\n        <div className=\"isoDropdownBody isoCartItemsWrapper\">\n          {this.renderProducts()}\n        </div>\n        <div className=\"isoDropdownFooterLinks\" onClick={this.hide}>\n          <Link href={`/dashboard/cart`}>\n            <a>View Cart</a>\n          </Link>\n\n          <h3>\n            Total Price: <span>${totalPrice.toFixed(2)}</span>\n          </h3>\n        </div>\n      </TopbarDropdownWrapper>\n    );\n    return (\n      <Popover\n        content={content}\n        trigger=\"click\"\n        visible={viewTopbarCart}\n        onVisibleChange={this.handleVisibleChange}\n        placement=\"bottomLeft\"\n      >\n        <div className=\"isoIconWrapper\">\n          <i\n            className=\"ion-android-cart\"\n            style={{ color: customizedTheme.textColor }}\n          />\n          {productQuantity.length === 0 ? (\n            ''\n          ) : (\n            <span>{productQuantity.length}</span>\n          )}\n        </div>\n      </Popover>\n    );\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    ...state.Ecommerce,\n    customizedTheme: state.ThemeSwitcher.topbarTheme,\n  };\n}\nexport default connect(\n  mapStateToProps,\n  {\n    changeViewTopbarCart,\n    changeProductQuantity,\n  }\n)(TopbarAddtoCart);\n"]},"metadata":{},"sourceType":"module"}