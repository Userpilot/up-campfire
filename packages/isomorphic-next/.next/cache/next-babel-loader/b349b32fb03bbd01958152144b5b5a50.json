{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/walaa/Desktop/Isomorphic Main/isomorphic/node_modules/@iso/containers/Calendar/Calendar.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport ModalEvents from './ModalEvents';\nimport notification from '@iso/components/Notification';\nimport calendarActions from '@iso/redux/calendar/actions';\nimport { CalendarStyleWrapper } from './Calendar.styles';\nvar Localizer = momentLocalizer(moment);\nvar DragAndDropCalendar = withDragAndDrop(Calendar);\n_c = DragAndDropCalendar;\nvar changeView = calendarActions.changeView,\n    changeEvents = calendarActions.changeEvents;\n\nvar mapToRBCFormat = function mapToRBCFormat(e) {\n  return Object.assign({}, e, {\n    start: new Date(e.start),\n    end: new Date(e.end)\n  });\n};\n\nvar getIndex = function getIndex(events, selectedEvent) {\n  return events.findIndex(function (event) {\n    return event.id === selectedEvent.id;\n  });\n};\n\nexport default function DndCalendar() {\n  _s();\n\n  var _useSelector = useSelector(function (state) {\n    return state.Calendar;\n  }),\n      events = _useSelector.events,\n      view = _useSelector.view;\n\n  var dispatch = useDispatch();\n\n  var _React$useState = React.useState({\n    view: view,\n    modalVisible: false,\n    selectedData: undefined\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      state = _React$useState2[0],\n      setState = _React$useState2[1];\n\n  var onSelectEvent = function onSelectEvent(selectedData) {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      modalVisible: 'update',\n      selectedData: selectedData\n    }));\n  };\n\n  var onSelectSlot = function onSelectSlot(selectedData) {\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      modalVisible: 'new',\n      selectedData: selectedData\n    }));\n  };\n\n  var onView = function onView(view) {\n    dispatch(changeView(view));\n  };\n\n  var moveEvent = function moveEvent(_ref) {\n    var event = _ref.event,\n        start = _ref.start,\n        end = _ref.end,\n        droppedOnAllDaySlot = _ref.isAllDay;\n    var allDay = event.allDay;\n\n    if (!event.allDay && droppedOnAllDaySlot) {\n      allDay = true;\n    } else if (event.allDay && !droppedOnAllDaySlot) {\n      allDay = false;\n    }\n\n    var updatedEvent = _objectSpread(_objectSpread({}, event), {}, {\n      start: start,\n      end: end,\n      allDay: allDay\n    });\n\n    var idx = getIndex(events, updatedEvent);\n\n    var nextEvents = _toConsumableArray(events);\n\n    nextEvents.splice(idx, 1, updatedEvent);\n    dispatch(changeEvents(nextEvents));\n    notification('success', 'Move event successfully', \"\".concat(event.title, \" was dropped onto \").concat(event.start));\n  };\n\n  var resizeEvent = function resizeEvent(_ref2) {\n    var event = _ref2.event,\n        start = _ref2.start,\n        end = _ref2.end;\n    var nextEvents = events.map(function (existingEvent) {\n      return existingEvent.id === event.id ? _objectSpread(_objectSpread({}, existingEvent), {}, {\n        start: start,\n        end: end\n      }) : existingEvent;\n    });\n    dispatch(changeEvents(nextEvents));\n    notification('success', 'Resize event successfully', \"\".concat(event.title, \" was resized to \").concat(start, \"-\").concat(end));\n  };\n\n  var setModalData = function setModalData(type, selectedData) {\n    var newEvents = _toConsumableArray(events);\n\n    var modalVisible = state.modalVisible;\n\n    if (type === 'cancel') {\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        modalVisible: false,\n        selectedData: undefined\n      }));\n    } else if (type === 'delete') {\n      var idx = getIndex(newEvents, selectedData);\n\n      if (idx > -1) {\n        newEvents.splice(idx, 1);\n      }\n\n      dispatch(changeEvents(newEvents));\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        modalVisible: false,\n        selectedData: undefined\n      }));\n    } else if (type === 'updateValue') {\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        selectedData: selectedData\n      }));\n    } else {\n      if (modalVisible === 'new') {\n        newEvents.push(selectedData);\n      } else {\n        var _idx = getIndex(newEvents, selectedData);\n\n        if (_idx > -1) {\n          newEvents[_idx] = selectedData;\n        }\n      }\n\n      dispatch(changeEvents(newEvents));\n      setState(_objectSpread(_objectSpread({}, state), {}, {\n        modalVisible: false,\n        selectedData: undefined\n      }));\n    }\n  };\n\n  return __jsx(CalendarStyleWrapper, {\n    className: \"isomorphicCalendarWrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }\n  }, __jsx(ModalEvents, {\n    modalVisible: state.modalVisible,\n    selectedData: state.selectedData,\n    setModalData: setModalData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }\n  }), __jsx(DragAndDropCalendar, {\n    className: \"isomorphicCalendar\",\n    selectable: true,\n    localizer: Localizer,\n    events: events.map(mapToRBCFormat),\n    onEventDrop: moveEvent,\n    resizable: true,\n    onEventResize: resizeEvent,\n    onSelectEvent: onSelectEvent,\n    onSelectSlot: onSelectSlot,\n    onView: onView,\n    defaultView: \"month\",\n    defaultDate: new Date(),\n    step: 60,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(DndCalendar, \"a0Bf5EsSou6roTiXteF2thHX4A8=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c2 = DndCalendar;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"DragAndDropCalendar\");\n$RefreshReg$(_c2, \"DndCalendar\");","map":{"version":3,"sources":["/Users/walaa/Desktop/Isomorphic Main/isomorphic/node_modules/@iso/containers/Calendar/Calendar.js"],"names":["React","useDispatch","useSelector","moment","Calendar","momentLocalizer","withDragAndDrop","ModalEvents","notification","calendarActions","CalendarStyleWrapper","Localizer","DragAndDropCalendar","changeView","changeEvents","mapToRBCFormat","e","Object","assign","start","Date","end","getIndex","events","selectedEvent","findIndex","event","id","DndCalendar","state","view","dispatch","useState","modalVisible","selectedData","undefined","setState","onSelectEvent","onSelectSlot","onView","moveEvent","droppedOnAllDaySlot","isAllDay","allDay","updatedEvent","idx","nextEvents","splice","title","resizeEvent","map","existingEvent","setModalData","type","newEvents","push"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport moment from 'moment';\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport withDragAndDrop from 'react-big-calendar/lib/addons/dragAndDrop';\nimport ModalEvents from './ModalEvents';\nimport notification from '@iso/components/Notification';\nimport calendarActions from '@iso/redux/calendar/actions';\n\nimport { CalendarStyleWrapper } from './Calendar.styles';\n\nconst Localizer = momentLocalizer(moment);\nconst DragAndDropCalendar = withDragAndDrop(Calendar);\nconst { changeView, changeEvents } = calendarActions;\n\nconst mapToRBCFormat = e =>\n  Object.assign({}, e, {\n    start: new Date(e.start),\n    end: new Date(e.end),\n  });\n\nconst getIndex = (events, selectedEvent) =>\n  events.findIndex(event => event.id === selectedEvent.id);\n\nexport default function DndCalendar() {\n  const { events, view } = useSelector(state => state.Calendar);\n  const dispatch = useDispatch();\n  const [state, setState] = React.useState({\n    view: view,\n    modalVisible: false,\n    selectedData: undefined,\n  });\n\n  const onSelectEvent = selectedData => {\n    setState({ ...state, modalVisible: 'update', selectedData });\n  };\n  const onSelectSlot = selectedData => {\n    setState({ ...state, modalVisible: 'new', selectedData });\n  };\n\n  const onView = view => {\n    dispatch(changeView(view));\n  };\n  const moveEvent = ({ event, start, end, isAllDay: droppedOnAllDaySlot }) => {\n    let allDay = event.allDay;\n    if (!event.allDay && droppedOnAllDaySlot) {\n      allDay = true;\n    } else if (event.allDay && !droppedOnAllDaySlot) {\n      allDay = false;\n    }\n\n    const updatedEvent = { ...event, start, end, allDay };\n    const idx = getIndex(events, updatedEvent);\n    const nextEvents = [...events];\n    nextEvents.splice(idx, 1, updatedEvent);\n    dispatch(changeEvents(nextEvents));\n\n    notification(\n      'success',\n      'Move event successfully',\n      `${event.title} was dropped onto ${event.start}`\n    );\n  };\n\n  const resizeEvent = ({ event, start, end }) => {\n    const nextEvents = events.map(existingEvent => {\n      return existingEvent.id === event.id\n        ? { ...existingEvent, start, end }\n        : existingEvent;\n    });\n\n    dispatch(changeEvents(nextEvents));\n\n    notification(\n      'success',\n      'Resize event successfully',\n      `${event.title} was resized to ${start}-${end}`\n    );\n  };\n\n  const setModalData = (type, selectedData) => {\n    const newEvents = [...events];\n    const { modalVisible } = state;\n    if (type === 'cancel') {\n      setState({\n        ...state,\n        modalVisible: false,\n        selectedData: undefined,\n      });\n    } else if (type === 'delete') {\n      const idx = getIndex(newEvents, selectedData);\n      if (idx > -1) {\n        newEvents.splice(idx, 1);\n      }\n      dispatch(changeEvents(newEvents));\n      setState({\n        ...state,\n        modalVisible: false,\n        selectedData: undefined,\n      });\n    } else if (type === 'updateValue') {\n      setState({ ...state, selectedData });\n    } else {\n      if (modalVisible === 'new') {\n        newEvents.push(selectedData);\n      } else {\n        const idx = getIndex(newEvents, selectedData);\n        if (idx > -1) {\n          newEvents[idx] = selectedData;\n        }\n      }\n      dispatch(changeEvents(newEvents));\n      setState({\n        ...state,\n        modalVisible: false,\n        selectedData: undefined,\n      });\n    }\n  };\n\n  return (\n    <CalendarStyleWrapper className=\"isomorphicCalendarWrapper\">\n      <ModalEvents\n        modalVisible={state.modalVisible}\n        selectedData={state.selectedData}\n        setModalData={setModalData}\n      />\n      <DragAndDropCalendar\n        className=\"isomorphicCalendar\"\n        selectable\n        localizer={Localizer}\n        events={events.map(mapToRBCFormat)}\n        onEventDrop={moveEvent}\n        resizable\n        onEventResize={resizeEvent}\n        onSelectEvent={onSelectEvent}\n        onSelectSlot={onSelectSlot}\n        onView={onView}\n        defaultView=\"month\"\n        defaultDate={new Date()}\n        step={60}\n      />\n    </CalendarStyleWrapper>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}