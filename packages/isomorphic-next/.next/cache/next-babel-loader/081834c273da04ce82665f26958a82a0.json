{"ast":null,"code":"var _jsxFileName = \"/Users/walaa/Desktop/Isomorphic Main/isomorphic/packages/isomorphic-next/containers/Topbar/TopbarAddToCart.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { Component } from 'react';\nimport Link from 'next/link';\nimport { connect } from 'react-redux';\nimport Popover from '@iso/components/uielements/popover';\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\nconst {\n  changeViewTopbarCart,\n  changeProductQuantity\n} = ecommerceAction;\nlet totalPrice;\n\nclass TopbarAddtoCart extends Component {\n  constructor(props) {\n    super(props);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n    this.hide = this.hide.bind(this);\n    this.renderProducts = this.renderProducts.bind(this);\n    this.changeQuantity = this.changeQuantity.bind(this);\n    this.cancelQuantity = this.cancelQuantity.bind(this);\n  }\n\n  hide() {\n    this.props.changeViewTopbarCart(false);\n  }\n\n  handleVisibleChange() {\n    this.props.changeViewTopbarCart(!this.props.viewTopbarCart);\n  }\n\n  renderProducts() {\n    const {\n      productQuantity,\n      products\n    } = this.props;\n    totalPrice = 0;\n\n    if (!productQuantity || productQuantity.length === 0) {\n      return __jsx(\"div\", {\n        className: \"isoNoItemMsg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 9\n        }\n      }, __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }\n      }, \"No item found\"));\n    }\n\n    return productQuantity.map(product => {\n      totalPrice += product.quantity * products[product.objectID].price;\n      return __jsx(SingleCart, _extends({\n        key: product.objectID,\n        quantity: product.quantity,\n        changeQuantity: this.changeQuantity,\n        cancelQuantity: this.cancelQuantity\n      }, products[product.objectID], {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 9\n        }\n      }));\n    });\n  }\n\n  changeQuantity(objectID, quantity) {\n    const {\n      productQuantity\n    } = this.props;\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      } else {\n        newProductQuantity.push({\n          objectID,\n          quantity\n        });\n      }\n    });\n    this.props.changeProductQuantity(newProductQuantity);\n  }\n\n  cancelQuantity(objectID) {\n    const {\n      productQuantity\n    } = this.props;\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      }\n    });\n    this.props.changeProductQuantity(newProductQuantity);\n  }\n\n  render() {\n    const {\n      url,\n      productQuantity,\n      viewTopbarCart,\n      customizedTheme\n    } = this.props;\n\n    const content = __jsx(TopbarDropdownWrapper, {\n      className: \"topbarAddtoCart\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"isoDropdownHeader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }, __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, \"Cart\")), __jsx(\"div\", {\n      className: \"isoDropdownBody isoCartItemsWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }, this.renderProducts()), __jsx(\"div\", {\n      className: \"isoDropdownFooterLinks\",\n      onClick: this.hide,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, __jsx(Link, {\n      href: `/dashboard/cart`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, __jsx(\"a\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \"View Cart\")), __jsx(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }\n    }, \"Total Price: \", __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 26\n      }\n    }, \"$\", totalPrice.toFixed(2)))));\n\n    return __jsx(Popover, {\n      content: content,\n      trigger: \"click\",\n      visible: viewTopbarCart,\n      onVisibleChange: this.handleVisibleChange,\n      placement: \"bottomLeft\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }\n    }, __jsx(\"div\", {\n      className: \"isoIconWrapper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }\n    }, __jsx(\"i\", {\n      className: \"ion-android-cart\",\n      style: {\n        color: customizedTheme.textColor\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }\n    }), productQuantity.length === 0 ? '' : __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }\n    }, productQuantity.length)));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return _objectSpread(_objectSpread({}, state.Ecommerce), {}, {\n    customizedTheme: state.ThemeSwitcher.topbarTheme\n  });\n}\n\nexport default connect(mapStateToProps, {\n  changeViewTopbarCart,\n  changeProductQuantity\n})(TopbarAddtoCart);","map":{"version":3,"sources":["/Users/walaa/Desktop/Isomorphic Main/isomorphic/packages/isomorphic-next/containers/Topbar/TopbarAddToCart.js"],"names":["React","Component","Link","connect","Popover","SingleCart","ecommerceAction","TopbarDropdownWrapper","changeViewTopbarCart","changeProductQuantity","totalPrice","TopbarAddtoCart","constructor","props","handleVisibleChange","bind","hide","renderProducts","changeQuantity","cancelQuantity","viewTopbarCart","productQuantity","products","length","map","product","quantity","objectID","price","newProductQuantity","forEach","push","render","url","customizedTheme","content","toFixed","color","textColor","mapStateToProps","state","Ecommerce","ThemeSwitcher","topbarTheme"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Link from 'next/link';\nimport { connect } from 'react-redux';\nimport Popover from '@iso/components/uielements/popover';\nimport SingleCart from '@iso/components/Cart/SingleCartModal';\nimport ecommerceAction from '@iso/redux/ecommerce/actions';\nimport TopbarDropdownWrapper from './TopbarDropdown.styles';\n\nconst { changeViewTopbarCart, changeProductQuantity } = ecommerceAction;\nlet totalPrice;\nclass TopbarAddtoCart extends Component {\n  constructor(props) {\n    super(props);\n    this.handleVisibleChange = this.handleVisibleChange.bind(this);\n    this.hide = this.hide.bind(this);\n    this.renderProducts = this.renderProducts.bind(this);\n    this.changeQuantity = this.changeQuantity.bind(this);\n    this.cancelQuantity = this.cancelQuantity.bind(this);\n  }\n  hide() {\n    this.props.changeViewTopbarCart(false);\n  }\n  handleVisibleChange() {\n    this.props.changeViewTopbarCart(!this.props.viewTopbarCart);\n  }\n  renderProducts() {\n    const { productQuantity, products } = this.props;\n    totalPrice = 0;\n    if (!productQuantity || productQuantity.length === 0) {\n      return (\n        <div className=\"isoNoItemMsg\">\n          <span>No item found</span>\n        </div>\n      );\n    }\n    return productQuantity.map(product => {\n      totalPrice += product.quantity * products[product.objectID].price;\n      return (\n        <SingleCart\n          key={product.objectID}\n          quantity={product.quantity}\n          changeQuantity={this.changeQuantity}\n          cancelQuantity={this.cancelQuantity}\n          {...products[product.objectID]}\n        />\n      );\n    });\n  }\n  changeQuantity(objectID, quantity) {\n    const { productQuantity } = this.props;\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      } else {\n        newProductQuantity.push({\n          objectID,\n          quantity,\n        });\n      }\n    });\n    this.props.changeProductQuantity(newProductQuantity);\n  }\n  cancelQuantity(objectID) {\n    const { productQuantity } = this.props;\n    const newProductQuantity = [];\n    productQuantity.forEach(product => {\n      if (product.objectID !== objectID) {\n        newProductQuantity.push(product);\n      }\n    });\n    this.props.changeProductQuantity(newProductQuantity);\n  }\n\n  render() {\n    const {\n      url,\n      productQuantity,\n      viewTopbarCart,\n      customizedTheme,\n    } = this.props;\n    const content = (\n      <TopbarDropdownWrapper className=\"topbarAddtoCart\">\n        <div className=\"isoDropdownHeader\">\n          <h3>Cart</h3>\n        </div>\n        <div className=\"isoDropdownBody isoCartItemsWrapper\">\n          {this.renderProducts()}\n        </div>\n        <div className=\"isoDropdownFooterLinks\" onClick={this.hide}>\n          <Link href={`/dashboard/cart`}>\n            <a>View Cart</a>\n          </Link>\n\n          <h3>\n            Total Price: <span>${totalPrice.toFixed(2)}</span>\n          </h3>\n        </div>\n      </TopbarDropdownWrapper>\n    );\n    return (\n      <Popover\n        content={content}\n        trigger=\"click\"\n        visible={viewTopbarCart}\n        onVisibleChange={this.handleVisibleChange}\n        placement=\"bottomLeft\"\n      >\n        <div className=\"isoIconWrapper\">\n          <i\n            className=\"ion-android-cart\"\n            style={{ color: customizedTheme.textColor }}\n          />\n          {productQuantity.length === 0 ? (\n            ''\n          ) : (\n            <span>{productQuantity.length}</span>\n          )}\n        </div>\n      </Popover>\n    );\n  }\n}\nfunction mapStateToProps(state) {\n  return {\n    ...state.Ecommerce,\n    customizedTheme: state.ThemeSwitcher.topbarTheme,\n  };\n}\nexport default connect(\n  mapStateToProps,\n  {\n    changeViewTopbarCart,\n    changeProductQuantity,\n  }\n)(TopbarAddtoCart);\n"]},"metadata":{},"sourceType":"module"}