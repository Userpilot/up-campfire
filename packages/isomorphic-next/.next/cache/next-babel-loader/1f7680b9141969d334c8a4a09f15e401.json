{"ast":null,"code":"var _jsxFileName = \"/Users/walaa/Desktop/Isomorphic Main/isomorphic/node_modules/@iso/components/Tables/ImageCell.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nconst PendingPool = {};\nconst ReadyPool = {};\nexport default function ImageCell({\n  src\n}) {\n  const [srcState, setSrcState] = React.useState(false);\n  const onLoadImage = React.useCallback(source => {\n    ReadyPool[src] = true;\n\n    if (source === src) {\n      setSrcState(source);\n    }\n  }, [src]);\n  const loadImage = React.useCallback(src => {\n    if (ReadyPool[src]) {\n      setSrcState(src);\n      return;\n    }\n\n    if (PendingPool[src]) {\n      PendingPool[src].push(onLoadImage);\n      return;\n    }\n\n    PendingPool[src] = [onLoadImage];\n    const img = new Image();\n\n    img.onload = () => {\n      PendingPool[src].forEach(callback => {\n        callback(src);\n      });\n      delete PendingPool[src];\n      img.onload = null;\n      src = undefined;\n    };\n\n    img.src = srcState;\n  }, [srcState, onLoadImage]);\n  React.useEffect(() => {\n    loadImage(src);\n  }, [loadImage, src]);\n  const style = src ? {\n    backgroundImage: `url(${src})`,\n    width: '70px',\n    height: '70px',\n    backgroundSize: 'cover'\n  } : undefined;\n  return __jsx(\"div\", {\n    className: \"exampleImage\",\n    style: style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 10\n    }\n  });\n}","map":{"version":3,"sources":["/Users/walaa/Desktop/Isomorphic Main/isomorphic/node_modules/@iso/components/Tables/ImageCell.js"],"names":["React","PendingPool","ReadyPool","ImageCell","src","srcState","setSrcState","useState","onLoadImage","useCallback","source","loadImage","push","img","Image","onload","forEach","callback","undefined","useEffect","style","backgroundImage","width","height","backgroundSize"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,WAAW,GAAG,EAApB;AACA,MAAMC,SAAS,GAAG,EAAlB;AAEA,eAAe,SAASC,SAAT,CAAmB;AAAEC,EAAAA;AAAF,CAAnB,EAA4B;AACzC,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BN,KAAK,CAACO,QAAN,CAAe,KAAf,CAAhC;AAEA,QAAMC,WAAW,GAAGR,KAAK,CAACS,WAAN,CACjBC,MAAD,IAAY;AACVR,IAAAA,SAAS,CAACE,GAAD,CAAT,GAAiB,IAAjB;;AACA,QAAIM,MAAM,KAAKN,GAAf,EAAoB;AAClBE,MAAAA,WAAW,CAACI,MAAD,CAAX;AACD;AACF,GANiB,EAOlB,CAACN,GAAD,CAPkB,CAApB;AASA,QAAMO,SAAS,GAAGX,KAAK,CAACS,WAAN,CACfL,GAAD,IAAS;AACP,QAAIF,SAAS,CAACE,GAAD,CAAb,EAAoB;AAClBE,MAAAA,WAAW,CAACF,GAAD,CAAX;AACA;AACD;;AAED,QAAIH,WAAW,CAACG,GAAD,CAAf,EAAsB;AACpBH,MAAAA,WAAW,CAACG,GAAD,CAAX,CAAiBQ,IAAjB,CAAsBJ,WAAtB;AACA;AACD;;AACDP,IAAAA,WAAW,CAACG,GAAD,CAAX,GAAmB,CAACI,WAAD,CAAnB;AAEA,UAAMK,GAAG,GAAG,IAAIC,KAAJ,EAAZ;;AACAD,IAAAA,GAAG,CAACE,MAAJ,GAAa,MAAM;AACjBd,MAAAA,WAAW,CAACG,GAAD,CAAX,CAAiBY,OAAjB,CAA0BC,QAAD,IAAc;AACrCA,QAAAA,QAAQ,CAACb,GAAD,CAAR;AACD,OAFD;AAGA,aAAOH,WAAW,CAACG,GAAD,CAAlB;AACAS,MAAAA,GAAG,CAACE,MAAJ,GAAa,IAAb;AACAX,MAAAA,GAAG,GAAGc,SAAN;AACD,KAPD;;AAQAL,IAAAA,GAAG,CAACT,GAAJ,GAAUC,QAAV;AACD,GAvBe,EAwBhB,CAACA,QAAD,EAAWG,WAAX,CAxBgB,CAAlB;AA0BAR,EAAAA,KAAK,CAACmB,SAAN,CAAgB,MAAM;AACpBR,IAAAA,SAAS,CAACP,GAAD,CAAT;AACD,GAFD,EAEG,CAACO,SAAD,EAAYP,GAAZ,CAFH;AAGA,QAAMgB,KAAK,GAAGhB,GAAG,GACb;AACEiB,IAAAA,eAAe,EAAG,OAAMjB,GAAI,GAD9B;AAEEkB,IAAAA,KAAK,EAAE,MAFT;AAGEC,IAAAA,MAAM,EAAE,MAHV;AAIEC,IAAAA,cAAc,EAAE;AAJlB,GADa,GAObN,SAPJ;AAQA,SAAO;AAAK,IAAA,SAAS,EAAC,cAAf;AAA8B,IAAA,KAAK,EAAEE,KAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACD","sourcesContent":["import React from 'react';\n\nconst PendingPool = {};\nconst ReadyPool = {};\n\nexport default function ImageCell({ src }) {\n  const [srcState, setSrcState] = React.useState(false);\n\n  const onLoadImage = React.useCallback(\n    (source) => {\n      ReadyPool[src] = true;\n      if (source === src) {\n        setSrcState(source);\n      }\n    },\n    [src]\n  );\n  const loadImage = React.useCallback(\n    (src) => {\n      if (ReadyPool[src]) {\n        setSrcState(src);\n        return;\n      }\n\n      if (PendingPool[src]) {\n        PendingPool[src].push(onLoadImage);\n        return;\n      }\n      PendingPool[src] = [onLoadImage];\n\n      const img = new Image();\n      img.onload = () => {\n        PendingPool[src].forEach((callback) => {\n          callback(src);\n        });\n        delete PendingPool[src];\n        img.onload = null;\n        src = undefined;\n      };\n      img.src = srcState;\n    },\n    [srcState, onLoadImage]\n  );\n  React.useEffect(() => {\n    loadImage(src);\n  }, [loadImage, src]);\n  const style = src\n    ? {\n        backgroundImage: `url(${src})`,\n        width: '70px',\n        height: '70px',\n        backgroundSize: 'cover',\n      }\n    : undefined;\n  return <div className=\"exampleImage\" style={style} />;\n}\n"]},"metadata":{},"sourceType":"module"}